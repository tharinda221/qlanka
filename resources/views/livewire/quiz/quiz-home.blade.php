<div class="min-h-screen bg-gradient-to-br from-purple-800 via-blue-700 to-pink-600 relative overflow-hidden">
    <!-- Background SVG -->
    <div class="absolute inset-0 opacity-20">
        <svg class="w-full h-full" viewBox="0 0 400 800" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
            <!-- Floating circles - Mobile optimized spread -->
            <!-- Top area circles (y: 0-200) -->
            <circle cx="50" cy="50" r="25" fill="white" opacity="0.2"/>
            <circle cx="150" cy="80" r="20" fill="white" opacity="0.25"/>
            <circle cx="250" cy="30" r="30" fill="white" opacity="0.15"/>
            <circle cx="350" cy="60" r="28" fill="white" opacity="0.2"/>
            <circle cx="100" cy="120" r="25" fill="white" opacity="0.18"/>
            <circle cx="200" cy="150" r="30" fill="white" opacity="0.22"/>
            <circle cx="300" cy="100" r="28" fill="white" opacity="0.2"/>
            <circle cx="50" cy="180" r="20" fill="white" opacity="0.25"/>
            <circle cx="150" cy="200" r="25" fill="white" opacity="0.18"/>
            <circle cx="250" cy="170" r="30" fill="white" opacity="0.2"/>
            <circle cx="350" cy="190" r="35" fill="white" opacity="0.15"/>
            <circle cx="100" cy="40" r="22" fill="white" opacity="0.22"/>
            <circle cx="300" cy="70" r="26" fill="white" opacity="0.18"/>
            <circle cx="200" cy="110" r="24" fill="white" opacity="0.2"/>
            <circle cx="50" cy="140" r="28" fill="white" opacity="0.15"/>
            <circle cx="350" cy="130" r="32" fill="white" opacity="0.25"/>
            
            <!-- Middle area circles (y: 200-500) -->
            <circle cx="50" cy="250" r="25" fill="white" opacity="0.2"/>
            <circle cx="150" cy="280" r="20" fill="white" opacity="0.25"/>
            <circle cx="250" cy="230" r="30" fill="white" opacity="0.15"/>
            <circle cx="350" cy="260" r="28" fill="white" opacity="0.2"/>
            <circle cx="100" cy="320" r="25" fill="white" opacity="0.18"/>
            <circle cx="200" cy="350" r="30" fill="white" opacity="0.22"/>
            <circle cx="300" cy="300" r="28" fill="white" opacity="0.2"/>
            <circle cx="50" cy="380" r="20" fill="white" opacity="0.25"/>
            <circle cx="150" cy="400" r="25" fill="white" opacity="0.18"/>
            <circle cx="250" cy="370" r="30" fill="white" opacity="0.2"/>
            <circle cx="350" cy="390" r="35" fill="white" opacity="0.15"/>
            <circle cx="100" cy="240" r="22" fill="white" opacity="0.22"/>
            <circle cx="300" cy="270" r="26" fill="white" opacity="0.18"/>
            <circle cx="200" cy="310" r="24" fill="white" opacity="0.2"/>
            <circle cx="50" cy="340" r="28" fill="white" opacity="0.15"/>
            <circle cx="350" cy="330" r="32" fill="white" opacity="0.25"/>
            
            <!-- Bottom area circles (y: 500-800) -->
            <circle cx="50" cy="550" r="25" fill="white" opacity="0.2"/>
            <circle cx="150" cy="580" r="20" fill="white" opacity="0.25"/>
            <circle cx="250" cy="530" r="30" fill="white" opacity="0.15"/>
            <circle cx="350" cy="560" r="28" fill="white" opacity="0.2"/>
            <circle cx="100" cy="620" r="25" fill="white" opacity="0.18"/>
            <circle cx="200" cy="650" r="30" fill="white" opacity="0.22"/>
            <circle cx="300" cy="600" r="28" fill="white" opacity="0.2"/>
            <circle cx="50" cy="680" r="20" fill="white" opacity="0.25"/>
            <circle cx="150" cy="700" r="25" fill="white" opacity="0.18"/>
            <circle cx="250" cy="670" r="30" fill="white" opacity="0.2"/>
            <circle cx="350" cy="690" r="35" fill="white" opacity="0.15"/>
            <circle cx="100" cy="540" r="22" fill="white" opacity="0.22"/>
            <circle cx="300" cy="570" r="26" fill="white" opacity="0.18"/>
            <circle cx="200" cy="610" r="24" fill="white" opacity="0.2"/>
            <circle cx="50" cy="640" r="28" fill="white" opacity="0.15"/>
            <circle cx="350" cy="630" r="32" fill="white" opacity="0.25"/>
            
            <!-- Additional mobile spread circles -->
            <circle cx="80" cy="100" r="18" fill="white" opacity="0.22"/>
            <circle cx="180" cy="120" r="22" fill="white" opacity="0.2"/>
            <circle cx="280" cy="90" r="26" fill="white" opacity="0.18"/>
            <circle cx="320" cy="140" r="20" fill="white" opacity="0.15"/>
            <circle cx="120" cy="160" r="24" fill="white" opacity="0.2"/>
            <circle cx="220" cy="180" r="28" fill="white" opacity="0.18"/>
            <circle cx="320" cy="160" r="22" fill="white" opacity="0.15"/>
            <circle cx="80" cy="200" r="26" fill="white" opacity="0.22"/>
            <circle cx="180" cy="220" r="20" fill="white" opacity="0.2"/>
            <circle cx="280" cy="190" r="24" fill="white" opacity="0.18"/>
            <circle cx="320" cy="240" r="30" fill="white" opacity="0.15"/>
            
            <!-- Mobile optimized question marks -->
            <!-- Top area question marks (y: 0-200) -->
            <text x="50" y="80" font-family="Arial" font-size="40" fill="white" opacity="0.15">?</text>
            <text x="150" y="50" font-family="Arial" font-size="35" fill="white" opacity="0.12">?</text>
            <text x="250" y="90" font-family="Arial" font-size="38" fill="white" opacity="0.15">?</text>
            <text x="350" y="60" font-family="Arial" font-size="30" fill="white" opacity="0.13">?</text>
            <text x="100" y="130" font-family="Arial" font-size="25" fill="white" opacity="0.10">?</text>
            <text x="200" y="160" font-family="Arial" font-size="30" fill="white" opacity="0.13">?</text>
            <text x="300" y="120" font-family="Arial" font-size="22" fill="white" opacity="0.11">?</text>
            <text x="50" y="180" font-family="Arial" font-size="35" fill="white" opacity="0.14">?</text>
            <text x="150" y="200" font-family="Arial" font-size="27" fill="white" opacity="0.10">?</text>
            <text x="250" y="170" font-family="Arial" font-size="20" fill="white" opacity="0.08">?</text>
            <text x="350" y="190" font-family="Arial" font-size="30" fill="white" opacity="0.16">?</text>
            <text x="100" y="40" font-family="Arial" font-size="25" fill="white" opacity="0.12">?</text>
            <text x="300" y="70" font-family="Arial" font-size="28" fill="white" opacity="0.13">?</text>
            <text x="200" y="110" font-family="Arial" font-size="24" fill="white" opacity="0.11">?</text>
            <text x="50" y="140" font-family="Arial" font-size="32" fill="white" opacity="0.15">?</text>
            <text x="350" y="130" font-family="Arial" font-size="22" fill="white" opacity="0.12">?</text>
            
            <!-- Middle area question marks (y: 200-500) -->
            <text x="50" y="300" font-family="Arial" font-size="40" fill="white" opacity="0.15">?</text>
            <text x="150" y="250" font-family="Arial" font-size="35" fill="white" opacity="0.12">?</text>
            <text x="250" y="320" font-family="Arial" font-size="38" fill="white" opacity="0.15">?</text>
            <text x="350" y="280" font-family="Arial" font-size="30" fill="white" opacity="0.13">?</text>
            <text x="100" y="400" font-family="Arial" font-size="25" fill="white" opacity="0.10">?</text>
            <text x="200" y="450" font-family="Arial" font-size="30" fill="white" opacity="0.13">?</text>
            <text x="300" y="380" font-family="Arial" font-size="22" fill="white" opacity="0.11">?</text>
            <text x="50" y="420" font-family="Arial" font-size="35" fill="white" opacity="0.14">?</text>
            <text x="150" y="390" font-family="Arial" font-size="27" fill="white" opacity="0.10">?</text>
            <text x="250" y="370" font-family="Arial" font-size="20" fill="white" opacity="0.08">?</text>
            <text x="350" y="390" font-family="Arial" font-size="30" fill="white" opacity="0.16">?</text>
            
            <!-- Bottom area question marks (y: 500-800) -->
            <text x="50" y="600" font-family="Arial" font-size="40" fill="white" opacity="0.15">?</text>
            <text x="150" y="550" font-family="Arial" font-size="35" fill="white" opacity="0.12">?</text>
            <text x="250" y="620" font-family="Arial" font-size="38" fill="white" opacity="0.15">?</text>
            <text x="350" y="580" font-family="Arial" font-size="30" fill="white" opacity="0.13">?</text>
            <text x="100" y="700" font-family="Arial" font-size="25" fill="white" opacity="0.10">?</text>
            <text x="200" y="750" font-family="Arial" font-size="30" fill="white" opacity="0.13">?</text>
            <text x="300" y="680" font-family="Arial" font-size="22" fill="white" opacity="0.11">?</text>
            <text x="50" y="720" font-family="Arial" font-size="35" fill="white" opacity="0.14">?</text>
            <text x="150" y="690" font-family="Arial" font-size="27" fill="white" opacity="0.10">?</text>
            <text x="250" y="670" font-family="Arial" font-size="20" fill="white" opacity="0.08">?</text>
            <text x="350" y="690" font-family="Arial" font-size="30" fill="white" opacity="0.16">?</text>
            
            <!-- Additional mobile question marks -->
            <text x="80" y="100" font-family="Arial" font-size="28" fill="white" opacity="0.15">?</text>
            <text x="180" y="120" font-family="Arial" font-size="24" fill="white" opacity="0.12">?</text>
            <text x="280" y="90" font-family="Arial" font-size="26" fill="white" opacity="0.15">?</text>
            <text x="320" y="140" font-family="Arial" font-size="20" fill="white" opacity="0.13">?</text>
            <text x="120" y="160" font-family="Arial" font-size="22" fill="white" opacity="0.11">?</text>
            <text x="220" y="180" font-family="Arial" font-size="25" fill="white" opacity="0.12">?</text>
            <text x="320" y="160" font-family="Arial" font-size="18" fill="white" opacity="0.10">?</text>
            <text x="80" y="200" font-family="Arial" font-size="24" fill="white" opacity="0.14">?</text>
            <text x="180" y="220" font-family="Arial" font-size="19" fill="white" opacity="0.10">?</text>
            <text x="280" y="190" font-family="Arial" font-size="16" fill="white" opacity="0.08">?</text>
            <text x="320" y="240" font-family="Arial" font-size="22" fill="white" opacity="0.16">?</text>
            
            <!-- Mobile optimized stars -->
            <polygon points="30,30 32,40 40,40 36,45 37,50 30,45 23,50 24,45 20,40 28,40" fill="white" opacity="0.3"/>
            <polygon points="150,40 152,50 160,50 156,55 157,60 150,55 143,60 144,55 140,50 148,50" fill="white" opacity="0.25"/>
            <polygon points="60,160 62,170 70,170 66,175 67,180 60,175 53,180 54,175 50,170 58,170" fill="white" opacity="0.2"/>
            <polygon points="100,25 102,35 110,35 106,40 107,45 100,40 93,45 94,40 90,35 98,35" fill="white" opacity="0.25"/>
            <polygon points="180,75 182,85 190,85 186,90 187,95 180,90 173,95 174,90 170,85 178,85" fill="white" opacity="0.2"/>
            <polygon points="15,125 17,135 25,135 21,140 22,145 15,140 8,145 9,140 5,135 13,135" fill="white" opacity="0.3"/>
            <polygon points="80,100 82,110 90,110 86,115 87,120 80,115 73,120 74,115 70,110 78,110" fill="white" opacity="0.22"/>
            <polygon points="120,150 122,160 130,160 126,165 127,170 120,165 113,170 114,165 110,160 118,160" fill="white" opacity="0.28"/>
            <polygon points="190,125 192,135 200,135 196,140 197,145 190,140 183,145 184,140 180,135 188,135" fill="white" opacity="0.24"/>
            <polygon points="50,200 52,210 60,210 56,215 57,220 50,215 43,220 44,215 40,210 48,210" fill="white" opacity="0.26"/>
            <polygon points="160,200 162,210 170,210 166,215 167,220 160,215 153,220 154,215 150,210 158,210" fill="white" opacity="0.21"/>
            <polygon points="220,100 222,110 230,110 226,115 227,120 220,115 213,120 214,115 210,110 218,110" fill="white" opacity="0.25"/>
            <polygon points="280,150 282,160 290,160 286,165 287,170 280,165 273,170 274,165 270,160 278,160" fill="white" opacity="0.22"/>
            <polygon points="320,200 322,210 330,210 326,215 327,220 320,215 313,220 314,215 310,210 318,210" fill="white" opacity="0.28"/>
            <polygon points="50,300 52,310 60,310 56,315 57,320 50,315 43,320 44,315 40,310 48,310" fill="white" opacity="0.24"/>
            <polygon points="150,350 152,360 160,360 156,365 157,370 150,365 143,370 144,365 140,360 148,360" fill="white" opacity="0.26"/>
            <polygon points="250,400 252,410 260,410 256,415 257,420 250,415 243,420 244,415 240,410 248,410" fill="white" opacity="0.21"/>
            <polygon points="350,450 352,460 360,460 356,465 357,470 350,465 343,470 344,465 340,460 348,460" fill="white" opacity="0.25"/>
            <polygon points="100,500 102,510 110,510 106,515 107,520 100,515 93,520 94,515 90,510 98,510" fill="white" opacity="0.22"/>
            <polygon points="200,550 202,560 210,560 206,565 207,570 200,565 193,570 194,565 190,560 198,560" fill="white" opacity="0.28"/>
            <polygon points="300,600 302,610 310,610 306,615 307,620 300,615 293,620 294,615 290,610 298,610" fill="white" opacity="0.24"/>
            <polygon points="50,650 52,660 60,660 56,665 57,670 50,665 43,670 44,665 40,660 48,660" fill="white" opacity="0.26"/>
            <polygon points="150,700 152,710 160,710 156,715 157,720 150,715 143,720 144,715 140,710 148,710" fill="white" opacity="0.21"/>
            <polygon points="250,750 252,760 260,760 256,765 257,770 250,765 243,770 244,765 240,760 248,760" fill="white" opacity="0.25"/>
            
        </svg>
    </div>
    <!-- Mobile Header -->
    <div class="flex justify-center items-center p-4 pt-8">
        <!-- <h1 class="text-white text-lg font-semibold">Welcome</h1> -->
    </div>

    <!-- User Profile Card -->
    <div class="px-4 mb-6 hidden">
        <div class="bg-white rounded-2xl shadow-xl p-6 mx-auto max-w-sm">
            <div class="text-center">
                <!-- Avatar -->
                <div class="w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full mx-auto mb-4 flex items-center justify-center">
                    <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                
                <!-- User Name -->
                <h2 class="text-xl font-bold text-gray-900 mb-4">Angel Sara</h2>
                
                <!-- Stats -->
                <div class="flex justify-between items-center text-center">
                    <div class="flex-1">
                        <div class="text-sm text-gray-600">Balance</div>
                        <div class="font-bold text-gray-900">Rs. 111</div>
                    </div>
                    <div class="w-px h-8 bg-gray-300"></div>
                    <div class="flex-1">
                        <div class="text-sm text-gray-600">Rank</div>
                        <div class="font-bold text-gray-900">11</div>
                    </div>
                    <div class="w-px h-8 bg-gray-300"></div>
                    <div class="flex-1">
                        <div class="text-sm text-gray-600">Lives</div>
                        <div class="font-bold text-gray-900">03</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quiz Content Area -->
    <div class="px-4 mb-6 relative z-10">
        <div class="bg-black/30 rounded-2xl shadow-xl p-6 mx-auto max-w-xl">
        <div class="text-center">
                <!-- Quiz Title -->
                <h1 class="text-4xl font-bold text-white mb-4">සාමාන්‍ය දැනුම Quiz</h1>
            
            <!-- Timer -->
                <div class="flex justify-center p-2">
                    <!-- <div class="text-md font-bold text-red-600 bg-red-100 p-2 rounded-lg mb-4">කාලය: 02:00</div> -->
                </div>
            
            <!-- Instructions -->
                <div class="text-white/90 mb-6 space-y-3 text-base">
                <p>ඔබට මිනිත්තු 2ක් ඇතුළත ප්‍රශ්න 5කට පිළිතුරු දිය යුතුය.</p>
                <p>සියල්ලට නිවැරැදිව පිලිතුරු ලබා දී GB 50 Data දිනා ගන්න.</p>
            </div>
            
            
            <!-- Footer Links -->
                <!-- <div class="flex flex-col gap-2">
                <button onclick="openTermsModal()" 
                            class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors">
                    Terms & Conditions
                </button>
                <button onclick="openPrivacyModal()" 
                            class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors">
                    Privacy Policy
                </button>
                </div> -->
            </div>
        </div>
    </div>

    <!-- Quiz Illustration -->
    <div class="px-4 mb-6 relative z-10">
        <div class="flex justify-center">
            <img src="/images/undraw_questions_g2px.svg" alt="Quiz Questions" class="w-64 h-48 object-contain opacity-90">
        </div>
    </div>

    <!-- Quiz Start Button -->
    <div class="fixed bottom-24 left-0 right-0 px-4 z-50 flex justify-center">
        <div class="w-full max-w-sm text-center">
            <button wire:click="showRegistrationForm" 
                    class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold py-3 px-4 rounded-lg hover:from-purple-600 hover:to-pink-600 transform hover:scale-105 transition-all duration-200 shadow-lg text-base mb-2">
                Quiz ආරම්භ කරන්න
            </button>
            
            <!-- Terms & Privacy Links -->
            <div class="flex justify-center gap-4 text-xs text-white/60">
                <button onclick="openTermsModal()" 
                        class="hover:text-white/80 transition-colors">
                    Terms & Conditions
                </button>
                <span class="text-white/40">|</span>
                <button onclick="openPrivacyModal()" 
                        class="hover:text-white/80 transition-colors">
                    Privacy Policy
                </button>
            </div>
        </div>
    </div>

    <!-- Registration Modal -->
    @if($showRegistrationModal)
    <div class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4">
        <div class="bg-gray-900 rounded-2xl w-full max-w-sm md:max-w-md lg:max-w-lg max-h-[90vh] overflow-y-auto border border-gray-700 relative">
            <div class="p-6">
                <button wire:click="$set('showRegistrationModal', false)" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
                
                <div class="text-center mb-6">
                    <h2 class="text-xl font-bold text-white">Register for Quiz</h2>
                </div>

                @if($errorMessage)
                <div class="mb-4 p-3 bg-red-900/40 border border-red-500/40 rounded-lg">
                    <p class="text-red-200 text-sm text-center">{{ $errorMessage }}</p>
                </div>
                @endif

                <!-- Registration Form -->
                <form wire:submit.prevent="submitRegistration">
                    <div class="space-y-4">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-300 mb-1 text-center">Full Name</label>
                            <input type="text" wire:model="name" required 
                                   class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm text-center"
                                   placeholder="Enter your full name">
                        </div>
                        
                        <div>
                            <label for="mobile" class="block text-sm font-medium text-gray-300 mb-1 text-center">Mobile Number</label>
                            <input type="tel" wire:model="mobileNumber" required 
                                   class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm text-center"
                                   placeholder="07XXXXXXXX" 
                                   maxlength="10" 
                                   pattern="0[0-9]{9}"
                                   title="Mobile number must start with 0 and be exactly 10 digits"
                                   oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                            @error('mobileNumber') <span class="text-red-400 text-xs mt-1 block">{{ $message }}</span> @enderror
                        </div>
                        
<div>
                            <label for="city" class="block text-sm font-medium text-gray-300 mb-1 text-center">City</label>
                            <select wire:model="city" required 
                                    class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-sm text-center">
                                <option value="">Select your city</option>
                                <option value="Colombo">Colombo</option>
                                <option value="Gampaha">Gampaha</option>
                                <option value="Kalutara">Kalutara</option>
                                <option value="Kandy">Kandy</option>
                                <option value="Matale">Matale</option>
                                <option value="Nuwara Eliya">Nuwara Eliya</option>
                                <option value="Galle">Galle</option>
                                <option value="Matara">Matara</option>
                                <option value="Hambantota">Hambantota</option>
                                <option value="Jaffna">Jaffna</option>
                                <option value="Kilinochchi">Kilinochchi</option>
                                <option value="Mannar">Mannar</option>
                                <option value="Vavuniya">Vavuniya</option>
                                <option value="Mullaitivu">Mullaitivu</option>
                                <option value="Batticaloa">Batticaloa</option>
                                <option value="Ampara">Ampara</option>
                                <option value="Trincomalee">Trincomalee</option>
                                <option value="Kurunegala">Kurunegala</option>
                                <option value="Puttalam">Puttalam</option>
                                <option value="Anuradhapura">Anuradhapura</option>
                                <option value="Polonnaruwa">Polonnaruwa</option>
                                <option value="Badulla">Badulla</option>
                                <option value="Monaragala">Monaragala</option>
                                <option value="Ratnapura">Ratnapura</option>
                                <option value="Kegalle">Kegalle</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mt-5">
                        <button type="submit" id="submitBtn"
                                class="w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200 font-semibold text-base disabled:opacity-50 disabled:cursor-not-allowed">
                            <span id="btnText">Continue</span>
                            <span id="loadingSpinner" class="hidden">
                                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                Loading...
                            </span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    @endif

    <!-- OTP Verification Modal -->
    @if($showOtpModal)
    <div class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4">
        <div class="bg-gray-900 rounded-2xl w-full max-w-sm md:max-w-md lg:max-w-lg max-h-[90vh] overflow-y-auto border border-gray-700 relative">
            <div class="p-6">
                <button wire:click="$set('showOtpModal', false)" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
                
                <div class="text-center mb-6">
                    <h2 class="text-xl font-bold text-white">Verify OTP</h2>
                    <p class="text-white/70 text-sm mt-2">Enter the OTP code sent to {{ $mobileNumber }}</p>
                </div>

                @if($errorMessage)
                <div class="mb-4 p-3 bg-red-900/40 border border-red-500/40 rounded-lg">
                    <p class="text-red-200 text-sm text-center">{{ $errorMessage }}</p>
                </div>
                @endif

                <!-- OTP Form -->
                <form wire:submit.prevent="verifyOtp">
                    <div class="space-y-4">
                        <div>
                            <label for="otp" class="block text-sm font-medium text-gray-300 mb-1 text-center">OTP Code</label>
                            <input type="text" wire:model="otpCode" required 
                                   class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-2xl text-center tracking-widest font-mono"
                                   placeholder="000000" 
                                   maxlength="6"
                                   inputmode="numeric"
                                   oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                   autocomplete="one-time-code">
                            @error('otpCode') <span class="text-red-400 text-xs mt-1 block text-center">{{ $message }}</span> @enderror
                        </div>
                    </div>
                    
                    <div class="mt-5">
                        <button type="submit"
                                class="w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200 font-semibold text-base disabled:opacity-50 disabled:cursor-not-allowed">
                            Verify & Start Quiz
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    @endif

    <!-- Include shared modals -->
    <x-quiz-modals />

    <script>
        // Session data from server
        const sessionData = @json($sessionData);
        
        function startQuiz() {
            // Check if user data exists in session
            if (sessionData && sessionData.name && sessionData.mobile && sessionData.city) {
                // User already registered, start quiz directly
                window.location.href = '/quiz/play';
            } else {
                // No session data, show mobile modal
                @this.call('showMobileModal');
            }
        }

        function submitRegistration(event) {
            event.preventDefault();
            
            // Show loading state
            const submitBtn = document.getElementById('submitBtn');
            const btnText = document.getElementById('btnText');
            const loadingSpinner = document.getElementById('loadingSpinner');
            
            submitBtn.disabled = true;
            btnText.classList.add('hidden');
            loadingSpinner.classList.remove('hidden');
            
            const formData = new FormData(event.target);
            const data = {
                name: formData.get('name'),
                mobile: formData.get('mobile'),
                city: formData.get('city'),
                _token: document.querySelector('meta[name="csrf-token"]').getAttribute('content')
            };

            // Submit form data and store in session
            fetch('/quiz/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRF-TOKEN': data._token
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (response.ok) {
                    // Registration successful, redirect to quiz play page
                    window.location.href = '/quiz/play';
                } else {
                    // Reset button state on error
                    submitBtn.disabled = false;
                    btnText.classList.remove('hidden');
                    loadingSpinner.classList.add('hidden');
                    alert('Registration failed. Please try again.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                // Reset button state on error
                submitBtn.disabled = false;
                btnText.classList.remove('hidden');
                loadingSpinner.classList.add('hidden');
                alert('Registration failed. Please try again.');
            });
        }

        // Close registration modal when clicking outside
        document.addEventListener('click', function(event) {
            const registrationModal = document.getElementById('registrationModal');
            if (event.target === registrationModal) {
                closeRegistrationModal();
            }
        });

        // Close registration modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeRegistrationModal();
            }
        });
    </script>
</div>
